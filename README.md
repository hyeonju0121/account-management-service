# account-management-service
계좌 상품을 확인하여 사용자가 원하는 (입출금/자유적금/정기적금)의 계좌를 개설하고,
<br>
입금 및 출금과 타인의 계좌로 계좌이체를 할 수 있는 거래 관리 시스템입니다.
<br>
또한, 사용자는 전체 계좌 및 거래 내역 조회, 잔액 조회 기능을 사용할 수 있습니다. 

<br>

## 프로젝트 구조
<img src="https://github.com/hyeonju0121/account-management-service/assets/67223214/fb3bcede-c5ca-4c36-89ca-e91d7c03f424" width="800" height="400"/>

## ERD
![account_ERD](https://github.com/hyeonju0121/account-management-service/assets/67223214/a4f5d9c2-4b9e-4e08-8a2b-ef413824d9fd)

<br>

## 사용 기술 스택
`Java`, `Spring boot`, `JPA`, `H2`, `MariaDB`, `Redis`, `Spring Security`, `jwt`
- 프로젝트 초기에만 구현 편의를 위해  `H2` 를 사용하고 이후 `MariaDB` 로 이전할 예정
  
<br>

## 요구사항 정리
### 1. 회원
- **회원가입**
  - 회원가입시 아이디, 비밀번호, 간편 비밀번호(6자리), 이름, 이메일이 필요하다.
  - 회원가입시 이미 가입된 아이디로 가입을 시도하면 에러가 발생한다.
  - 중복 아이디는 허용하지 않는다.
  - 패스워드는 암호화된 형태로 저장
    
- **로그인&로그아웃**
  - 로그인 시 존재하지 않는 아이디를 이용하여 로그인을 시도하면 에러가 발생한다.
  - 로그인 시 비밀번호가 일치하지 않는다면 에러가 발생한다.
  - 로그아웃 시 계좌/거래 서비스를 이용할 수 없다.

### 2. 계좌 관리
<div markdown="1">    

    * 자유적금 

      - 자유적금을 개설할 때, 만기일자를 입력해야 한다.

    * 정기적금

      - 매월 자동이체될 날짜를 입력받아야 한다.
      - 해당 적금 상품 기간에 맞춰 만기일자가 자동으로 저장되어야 한다.

  </div>
  
- **계좌 개설**
  - 사용자는 입출금/자유적금/정기적금 에 해당하는 계좌를 개설할 수 있다.
  - 계좌 생성을 위한 사용자 아이디, 계좌 종류, 초기 금액 이 필요하다.
  - 계좌 번호는 유일해야 하고, 시스템에서 자동 발급되도록 관리한다.
  - <details>
    <summary> 다음 사항이 발생하는 경우에는 실패 응답을 반환합니다. </summary>

    - 사용자가 로그인을 하지 않은 경우
    - 사용자가 존재하지 않은 경우
    - 계좌 종류가 존재하지 않는 상품인 경우
    - 계좌가 5개(사용자당 최대 보유 가능 계좌 수)인 경우
    - 초기 금액(최소 5000원 이상)이 너무 작은 경우
    - (자유적금) 만기일자가 입력되지 않은 경우

    </details>

- **계좌 해지**
  - 계좌 해지를 위한 사용자 아이디와 계좌번호, 간편 비밀번호(6자리)가 필요하다.
  - <details>
    <summary> 다음 사항이 발생하는 경우에는 실패 응답을 반환합니다. </summary>

    - 사용자가 로그인을 하지 않은 경우
    - 사용자 또는 계좌번호가 존재하지 않는 경우
    - 사용자 아이디와 계좌 소유주가 다른 경우
    - 계좌가 이미 해지 상태인 경우
    - 잔액이 있는 경우

    </details>
    
- **계좌 상품 조회**
  - 사용자는 전체 계좌 상품들을 조회할 수 있다.
  - <details>
    <summary> 다음 사항이 발생하는 경우에는 실패 응답을 반환합니다. </summary>

    - 사용자가 로그인을 하지 않은 경우
   
    </details>

- **전체 계좌 조회**
  - 사용자가 보유한 계좌를 전체 조회할 수 있다.
  - 계좌 조회를 위한 사용자 아이디, 간편 비밀번호(6자리)가 필요하다.
  - <details>
    <summary> 다음 사항이 발생하는 경우에는 실패 응답을 반환합니다. </summary>

    - 사용자가 로그인을 하지 않은 경우
    - 사용자가 존재하지 않는 경우
   
    </details>

- **잔액 조회**
  - 잔액 조회를 위한 사용자 아이디와 계좌번호, 간편 비밀번호(6자리)가 필요하다.
  - <details>
    <summary> 다음 사항이 발생하는 경우에는 실패 응답을 반환합니다. </summary>

    - 사용자가 로그인을 하지 않은 경우
    - 계좌번호와 사용자 아이디, 간편 비밀번호(6자리) 가 일치하지 않은 경우
    - 사용자 아이디와 계좌 소유주가 다른 경우
    - 계좌가 이미 해지 상태인 경우
   
    </details>

### 3. 거래 관리
<div markdown="1">    

    * 입금과 출금은 본인 계좌에서만 입금, 출금이 가능하다는 가정 하에 구현

  </div>
  
- **입금**
  - 입금을 위한 사용자 아이디와 입금액, 계좌 번호, 간편 비밀번호(6자리)가 필요하다. 
  - <details>
    <summary> 다음 사항이 발생하는 경우에는 실패 응답을 반환합니다. </summary>

    - 사용자가 로그인을 하지 않은 경우
    - 계좌 번호와 사용자 아이디, 간편 비밀번호가 일치하지 않은 경우
    - 계좌가 이미 해지 상태인 경우
   
    </details>

- **출금**
  - 출금을 위한 사용자 아이디와 출금액, 계좌번호, 간편 비밀번호(6자리)가 필요하다.
  - <details>
    <summary> 다음 사항이 발생하는 경우에는 실패 응답을 반환합니다. </summary>

    - 사용자가 로그인을 하지 않은 경우
    - 계좌 번호와 사용자 아이디, 간편 비밀번호가 일치하지 않은 경우
    - 계좌가 이미 해지 상태인 경우
    - 출금액이 잔액보다 큰 경우
   
    </details>

- **송금**
  - 송금을 위한 사용자 아이디, 출금 대상 계좌번호, 송금액, 송금 대상 계좌번호, 소유주, 간편 비밀번호(6자리) 가 필요하다.
  - <details>
    <summary> 다음 사항이 발생하는 경우에는 실패 응답을 반환합니다. </summary>

    - 사용자가 로그인을 하지 않은 경우
    - 계좌 번호와 사용자 아이디, 간편 비밀번호가 일치하지 않은 경우
    - 송금 대상 계좌번호와 소유주가 일치하지 않은 경우
    - 송금 대상 계좌번호가 이미 해지 상태인 경우
    - 거래 금액이 잔액보다 큰 경우
    - 거래 금액이 너무 작거나 큰 경우 (5,000 < 거래 금액 < 3,000,000)
   
    </details>

- **거래내역 조회**
  - 입금, 출금, 송금 내역을 조회할 수 있다. 
  - 거래 내역 조회를 위한 사용자 아이디, 계좌 번호, 간편 비밀번호(6자리) 가 필요하다.
     - 계좌의 소유주만 요청할 수 있어야 한다.
  - 거래일시에 대한 필터링이 가능해야 한다.
  - 거래 종류(입금/ 출금/ 송금) 별로 거래 내역 조회가 가능해야 한다.
  - 페이징 기능이 필요하다.
  - 계좌 번호, 거래 종류, 거래 금액, 잔액, 거래 일시가 응답에 포함되어야 한다. 
    
